
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Cerner and iControl - Engineering Health</title>
  <meta name="author" content="Cerner">

  
  <meta name="description" content="">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://engineering.cerner.com/blog/cerner-and-icontrol">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/site/site.css" media="screen, projection" rel="stylesheet" type="text/css">

  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/libs/bootstrap.min.js"></script>

  <link href="/atom.xml" rel="alternate" title="Engineering Health" type="application/atom+xml">
  <script src="/javascripts/search.min.js" type="text/javascript" charset="utf-8"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37701128-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body  class="top-navbar  ">
  



<header id="banner" role="banner" class="container-fluid banner-kc-background">

  <div class="image">

    
      <img src="/images/KC.png" alt="Kansas City" />
    

    <div id="header1">Engineering Health<br/><span class="header2">A <b>Cerner</b> Blog</span></div>

  </div>
  <nav class="navbar navbar-inverse" role="navigation">
  <div class="container">
    <div class="navbar-inner">
      <a class="brand" href="#">Engineering Health</a>
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="selected">
            <a href="/">Blog</a>
          </li>
          <li >
            <a href="/culture">Culture</a>
          </li>
          <li >
            <a href="/tech_talks">Tech Talks</a>
          </li>
          <li >
            <a href="/open_source">Open Source</a>
          </li>
          <li >
            <a href="/blog/archives">Archives</a>
          </li>
        </ul>
        <div id="search" class="pull-right">
          <form action="/search" method="get" class="navbar-search">
            <input type="text" id="search-query" name="q" class="search-query" placeholder="Search" autocomplete="off">
            <img src="/images/MagnifyingGlass.png" alt="Search" width="16" height="16" />
          </form>
        </div>
      </div>
    </div>
  </div>
</nav>

</header>


  <div class="container-fluid post-container">
    <div class="row-fluid">
      <section class="span12" id="search-results" style="display: none;">
  <h2>Search results</h2>
  <div class="entries">
  </div>
</section>
    </div>
    <div class="row-fluid">
      
<article id="main" class="hentry span8" role="article">

  <section class="post">
    
  <header class="entry-header">
    
      <h1 class="entry-title">Cerner and iControl</h1>
    
    
      <div class="entry-meta meta">
        








  


<time datetime="2018-03-13T00:00:00-05:00" pubdate data-updated="true">Mar 13<span>th</span>, 2018</time> | 
  


  <span class="byline author vcard">
    <span class="fn">Jerrod Carpenter</span>
  </span>


        
      </div>
    
  </header>


<div class="entry-content"><p>At Cerner, we manage our own infrastructure and a big part of that is managing F5 load balancers. If you are a Ruby developer or a network engineer and regularly work with F5s, then I have good news! I&rsquo;ve created a gem that abstracts iControl&rsquo;s REST API. It makes working with the API easy to understand and eases the effort required to automate changes across many devices.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">api</span> <span class="o">=</span> <span class="ss">IcontrolRest</span><span class="p">:</span><span class="ss">:Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">host</span><span class="p">:</span> <span class="s1">&#39;1.2.3.4&#39;</span><span class="p">,</span> <span class="ss">user</span><span class="p">:</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="ss">pass</span><span class="p">:</span> <span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="n">verify_cert</span><span class="p">:</span> <span class="kp">false</span><span class="p">)</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="o">&lt;</span><span class="ss">Icontrol</span><span class="p">:</span><span class="ss">:Client</span><span class="p">:</span><span class="mh">0x007fb953ab7750</span> <span class="vi">@options</span><span class="o">=</span><span class="p">{</span> <span class="o">.</span><span class="n">.</span><span class="o">.</span> <span class="p">}</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>After logging in, one can build a query via an instance method:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">api</span><span class="o">.</span><span class="n">get_sys_dns</span>
</span><span class='line'><span class="c1"># returns an object like this:</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="p">{</span> <span class="s2">&quot;kind&quot;</span>        <span class="o">=&gt;</span> <span class="s2">&quot;tm:sys:dns:dnsstate&quot;</span><span class="p">,</span>
</span><span class='line'>     <span class="s2">&quot;selfLink&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;https://localhost/mgmt/tm/sys/dns?ver=11.5.4&quot;</span><span class="p">,</span>
</span><span class='line'>     <span class="s2">&quot;description&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;configured-by-dhcp&quot;</span><span class="p">,</span>
</span><span class='line'>     <span class="s2">&quot;nameServers&quot;</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s2">&quot;1.2.3.72&quot;</span><span class="p">,</span> <span class="s2">&quot;1.2.3.73&quot;</span><span class="o">]</span><span class="p">,</span>
</span><span class='line'>     <span class="s2">&quot;search&quot;</span>      <span class="o">=&gt;</span> <span class="o">[</span><span class="s2">&quot;domain.com&quot;</span><span class="o">]</span>
</span><span class='line'>   <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The gem builds REST queries given a method delimited by underscores. The first word is the REST method and the following words are the path you&rsquo;d like to send your request to.</p>

<p>For example, if you&rsquo;d like to get the version of the F5, given this <a href="https://devcentral.f5.com/d/icontrol-rest-api-reference-version-120">iControl REST API doc</a></p>

<p>You&rsquo;d call a method that looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">api</span><span class="o">.</span><span class="n">get_sys_version</span>
</span><span class='line'><span class="c1"># returns an object like this:</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="p">{</span> <span class="s2">&quot;kind&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;tm:sys:version:versionstats&quot;</span><span class="p">,</span>
</span><span class='line'>     <span class="s2">&quot;selfLink&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;https://localhost/mgmt/tm/sys/version?ver=12.1.2&quot;</span><span class="p">,</span>
</span><span class='line'>     <span class="s2">&quot;entries&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;https://localhost/mgmt/tm/sys/version/0&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;nestedStats&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>          <span class="s2">&quot;entries&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;Build&quot;</span>   <span class="o">=&gt;</span> <span class="p">{</span> <span class="s2">&quot;description&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;0.0.249&quot;</span> <span class="p">},</span>
</span><span class='line'>            <span class="s2">&quot;Date&quot;</span>    <span class="o">=&gt;</span> <span class="p">{</span> <span class="s2">&quot;description&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Wed Nov 30 16:04:00 PST 2016&quot;</span> <span class="p">},</span>
</span><span class='line'>            <span class="s2">&quot;Edition&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s2">&quot;description&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Final&quot;</span> <span class="p">},</span>
</span><span class='line'>            <span class="s2">&quot;Product&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s2">&quot;description&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;BIG-IP&quot;</span> <span class="p">},</span>
</span><span class='line'>            <span class="s2">&quot;Title&quot;</span>   <span class="o">=&gt;</span> <span class="p">{</span> <span class="s2">&quot;description&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Main Package&quot;</span> <span class="p">},</span>
</span><span class='line'>            <span class="s2">&quot;Version&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s2">&quot;description&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;12.1.2&quot;</span> <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>So in practice you could put all this together to do something like audit the versions of F5s in a collection:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="s1">&#39;hostname1&#39;</span><span class="p">,</span> <span class="s1">&#39;hostname2&#39;</span><span class="p">,</span> <span class="s1">&#39;hostname3&#39;</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">host</span><span class="o">|</span>
</span><span class='line'>  <span class="n">api</span> <span class="o">=</span> <span class="ss">IcontrolRest</span><span class="p">:</span><span class="ss">:Client</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">host</span><span class="p">:</span> <span class="n">host</span><span class="p">,</span> <span class="ss">user</span><span class="p">:</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="ss">pass</span><span class="p">:</span> <span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="n">verify_cert</span><span class="p">:</span> <span class="kp">false</span><span class="p">)</span>
</span><span class='line'>  <span class="n">result</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_sys_version</span>
</span><span class='line'>  <span class="n">version</span> <span class="o">=</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;entries&#39;</span><span class="o">][</span><span class="err">‘</span><span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">mgmt</span><span class="o">/</span><span class="n">tm</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">version</span><span class="o">/</span><span class="mi">0</span><span class="err">’</span><span class="o">][</span><span class="s1">&#39;nestedStats&#39;</span><span class="o">][</span><span class="s1">&#39;entries&#39;</span><span class="o">][</span><span class="s1">&#39;Version&#39;</span><span class="o">][</span><span class="s1">&#39;description&#39;</span><span class="o">]</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;host: </span><span class="si">#{</span><span class="n">host</span><span class="si">}</span><span class="s2"> | version: </span><span class="si">#{</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">unless</span> <span class="n">version</span> <span class="o">==</span> <span class="err">‘</span><span class="mi">12</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="err">’</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>This would print out the hostname and version of any F5s that aren&rsquo;t on version 12.0.0. This is just one example, I encourage you to look through the iControl REST API docs to get a feeling for what&rsquo;s really possible.</p>
</div>


  </section>
  <footer>
    <p class="meta">
      


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    
    <ul class="pager">
      
      <li class="previous"><a class="basic-alignment left"
        href="/blog/one-year-calling-innovations-home/" title="Previous Post:
        One Year Calling Innovations Home">&laquo; Previous Post</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
      <li class="next"><a class="basic-alignment right" href="/blog/shipit-xi-spring-2018/"
        title="Next Post: ShipIt XI Day: Spring 2018">Next Post &raquo;</a></li>
      
    </ul>
  </footer>
</article>

<aside class="sidebar-nav span4">
  
    <section class="well">
  <h2>Recent Posts</h2>
  <ul id="recent_posts" class="nav nav-list">
    
      <li>
        <a href="/blog/summer-of-engineering-health-intern-story/">Summer of Engineering Health: A Software Intern's Story</a>
      </li>
    
      <li>
        <a href="/blog/data-engineering-with-bunsen/">Scalable Data Science With FHIR</a>
      </li>
    
      <li>
        <a href="/blog/cerners-open-source-contributions-for-interoperability-developers/">Cerner's Open Source Contributions for Interoperability Developers</a>
      </li>
    
      <li>
        <a href="/blog/srecon18-recap/">SREcon18 Recap</a>
      </li>
    
      <li>
        <a href="/blog/say_hello_to_the_2018_summer_interns/">Say Hello to the 2018 Summer Interns</a>
      </li>
    
  </ul>
</section>
<section class="divider">
  <svg width="70" height="10">
   <rect width="10" height="10" x="0" y="0" style="fill:rgb(20,124,193)" />
   <rect width="10" height="10" x="20" y="0" style="fill:rgb(121,193,68)" />
   <rect width="10" height="10" x="40" y="0" style="fill:rgb(20,124,193)" />
   <rect width="10" height="10" x="60" y="0" style="fill:rgb(121,193,68)" />
</svg>
</section>
<section class="well">
  <h2>GitHub Repos</h2>
  <ul id="gh_repos" class="nav">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/cerner">@cerner</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'cerner',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  
<script id="search-results-template" type="text/mustache">
  {{#entries}}
    <article class="search-result">
        <div class="search-meta meta">
        {{#date}}<time datetime="{{pubdate}}" pubdate>{{displaydate}}</time>{{/date}} | {{author}}
        </div>
        <a href="{{url}}">{{title}}</a>
    </article>
  {{/entries}}
</script>

<script type="text/javascript">
  $(function() {
    $('#search-query').lunrSearch({
      indexUrl: '/javascripts/index.json',   // Url for the .json file containing search index data
      results : '#search-results',  // selector for containing search results element
      entries : '.entries',         // selector for search entries containing element (contained within results above)
      template: '#search-results-template'  // selector for Mustache.js template
    });
    //Currently ignoring the "return/enter" keystroke when searching (as this would just result in a 404 for the page lookup).
    $('#search-query').keydown(function(event){
      if(event.keyCode == 13) {
        event.preventDefault();
        return false;
      }
    });
  });
</script>

  <footer role="contentinfo" class="page-footer">
  <div class="container-fluid">
    <div class="row">
      <div class="span2">
          <img src="/images/Cerner_White_Horizontal.png" alt="Cerner Logo" />
      </div>
      <div class="span10 pull-left">
          <p>&copy; 2018</p>
      </div>
    </div>
  </div>
</footer>


  










</body>
</html>
